{"version":3,"file":"0.FC4-a2PK.js","sources":["../../../../../../src/routes/+layout.js","../../../../../../src/routes/Header.svelte","../../../../../../src/routes/+layout.svelte"],"sourcesContent":["export const prerender = 'auto';","<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { page } from '$app/stores';\n\timport hot from '$lib/images/hot.svg';\n\timport { height } from '$lib/store.js';\n\timport { ElectrumClient, ElectrumTransport } from '@electrum-cash/network';\n\timport { IndexedDBProvider } from '@mainnet-cash/indexeddb-storage';\n\timport { FutureWallet } from '@fbch/lib';\n\timport { BaseWallet } from 'mainnet-js';\n\n\tlet heightValue: number;\n\tlet walletError = false;\n\tlet wallet;\n\tlet balance;\n\n\theight.subscribe((value: any) => {\n\t\tconsole.log(heightValue);\n\t\theightValue = value;\n\t});\n\n\tfunction updateHeight(newHeight: any) {\n\t\tconsole.log(heightValue);\n\t\theight.set(newHeight);\n\t}\n\n\t// Set up a callback function to handle new blocks.\n\tconst handleNotifications = function (data: any) {\n\t\tif (data.method === 'blockchain.headers.subscribe') {\n\t\t\tlet d = data.params[0];\n\t\t\tif (d.height && d.height > 1) updateHeight(d.height);\n\t\t}\n\t};\n\n\tonMount(async () => {\n\t\ttry {\n\t\t\tBaseWallet.StorageProvider = IndexedDBProvider;\n\t\t\twallet = await FutureWallet.named('hot');\n\t\t\tbalance = await wallet.getBalance('bch');\n\t\t} catch (e) {\n\t\t\twalletError = true;\n\t\t\tthrow e;\n\t\t}\n\n\t\t// Initialize an electrum client.\n\t\tconst electrum = new ElectrumClient(\n\t\t\t'FBCH',\n\t\t\t'1.4.1',\n\t\t\t'bch.imaginary.cash',\n\t\t\tElectrumTransport.WSS.Port,\n\t\t\tElectrumTransport.WSS.Scheme\n\t\t);\n\n\t\t// Wait for the client to connect\n\t\tawait electrum.connect();\n\t\t// Listen for notifications.\n\t\telectrum.on('notification', handleNotifications);\n\t\tawait electrum.subscribe('blockchain.headers.subscribe');\n\t});\n</script>\n\n<div class=\"warn\">\n\tPre-alpha pre-release. Use at your own risk.<br />\n\tBugs and usability issues may result in loss of funds.\n</div>\n\n<div class=\"wallet\">\n\t{#if wallet}\n\t\t{#if walletError}\n\t\t\t⚠️\n\t\t{/if}\n\t\t{#if typeof balance !== 'undefined'}\n\t\t\t{balance} BCH\n\t\t{/if}\n\t\t\n\t\t\t<a href=\"/wallet\">\n\t\t\t\t<img width=30 src={hot} alt=\"wallet\" />\n\t\t\t</a>\n\t\t\n\t\t\n\t\t\n\t{/if}\n\t\n</div>\n\n<header>\n\t<div class=\"corner\">\n\t\t<a href=\"/\">\n\t\t\t<img src=\"/FBCH.svg\" alt=\"Home\" />\n\t\t</a>\n\t</div>\n\t<nav>\n\t\t<svg viewBox=\"0 0 2 3\" aria-hidden=\"true\">\n\t\t\t<path d=\"M0,0 L1,2 C1.5,3 1.5,3 2,3 L2,0 Z\" />\n\t\t</svg>\n\t\t<ul>\n\t\t\t<li style=\"font-weight: 900;\" aria-current={$page.url.pathname === '/' ? 'page' : undefined}>\n\t\t\t\t<a style=\"font-size: larger\" href=\"/\"><b>&#9432</b></a>\n\t\t\t</li>\n\t\t\t<li aria-current={$page.url.pathname === '/vaults' ? 'page' : undefined}>\n\t\t\t\t<a href=\"/vaults\">Vaults</a>\n\t\t\t</li>\n\t\t\t<li aria-current={$page.url.pathname === '/write' ? 'page' : undefined}>\n\t\t\t\t<a href=\"/write\">Write</a>\n\t\t\t</li>\n\t\t</ul>\n\t\t<svg viewBox=\"0 0 2 3\" aria-hidden=\"true\">\n\t\t\t<path d=\"M0,0 L0,3 C0.5,3 0.5,3 1,2 L2,0 Z\" />\n\t\t</svg>\n\t</nav>\n\t<div class=\"status\">\n\t\t{#if heightValue}\n\t\t\t{heightValue.toLocaleString()} &nbsp;■\n\t\t{/if}\n\t</div>\n</header>\n\n\n\n<style>\n\theader {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t}\n\t.wallet {\n\t\tposition: sticky;\n\t\ttop: 0px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: right;\n\t\theight: 32px;\n\t\tpadding: 1em;\n\t\tbackground-color: #ffffff88;\n\t}\n\n\t.wallet a{\n\t\tpadding: 1em;\n\t}\n\t.status {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tfont-weight: 900;\n\t\tfont-size: small;\n\t\tmargin: auto;\n\t\tcolor: rgba(255, 255, 255, 0.7);\n\t}\n\n\t.corner {\n\t\twidth: 3em;\n\t\theight: 3em;\n\t}\n\n\t.corner a {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t.corner img {\n\t\twidth: 2em;\n\t\theight: 2em;\n\t\tobject-fit: contain;\n\t}\n\n\tnav {\n\t\tdisplay: flex;\n\t\tmargin: auto;\n\t\tjustify-content: center;\n\t\t--background: rgba(255, 255, 255, 0.7);\n\t}\n\n\tsvg {\n\t\twidth: 2em;\n\t\theight: 3em;\n\t\tdisplay: block;\n\t}\n\n\tpath {\n\t\tfill: var(--background);\n\t}\n\n\tul {\n\t\tposition: relative;\n\t\tpadding: 0;\n\t\tmargin: 0;\n\t\theight: 3em;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tlist-style: none;\n\t\tbackground: var(--background);\n\t\tbackground-size: contain;\n\t}\n\n\tli {\n\t\tposition: relative;\n\t\theight: 100%;\n\t}\n\n\tli[aria-current='page']::before {\n\t\t--size: 6px;\n\t\tcontent: '';\n\t\twidth: 0;\n\t\theight: 0;\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: calc(50% - var(--size));\n\t\tborder: var(--size) solid transparent;\n\t\tborder-top: var(--size) solid var(--color-theme-1);\n\t}\n\n\tnav a {\n\t\tdisplay: flex;\n\t\theight: 100%;\n\t\talign-items: center;\n\t\tpadding: 0 0.3em;\n\t\tcolor: var(--color-text);\n\t\tfont-weight: 700;\n\t\tfont-size: 0.8rem;\n\t\ttext-transform: uppercase;\n\t\ttext-decoration: none;\n\t\ttransition: color 0.2s linear;\n\t}\n\n\ta:hover {\n\t\tcolor: var(--color-theme-1);\n\t}\n\n\t.warn {\n\t\tfont-weight: 900;\n\t\tfont-size: smaller;\n\t\tpadding: 0.2em;\n\t\tbackground-color: #ffe13e;\n\t}\n</style>\n","<script>\n\timport Header from './Header.svelte';\n\timport './styles.css';\n</script>\n\n<div class=\"app\">\n\t<Header />\n\n\t<main>\n\t\t<slot />\n\t</main>\n\n\t<footer>\n\t\t<p>\n\t\t\t<a href=\"/audit\">audit</a> ■\n\t\t\t<a href=\"/contracts\">contracts</a> ■\n\t\t\t<a href=\"/flipstarter\">flipstarter</a>\n\t\t</p>\n\t\t\n\t</footer>\n</div>\n\n<style>\n\t.app {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmin-height: 100vh;\n\t}\n\n\tmain {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 1rem;\n\t\twidth: 100%;\n\t\tmax-width: 64rem;\n\t\tmargin: 0 auto;\n\t\tbox-sizing: border-box;\n\t}\n\n\tfooter {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tpadding: 12px;\n\t}\n\n\tfooter a {\n\t\tfont-weight: bold;\n\t}\n\n\t@media (min-width: 480px) {\n\t\tfooter {\n\t\t\tpadding: 12px 0;\n\t\t}\n\t}\n</style>\n"],"names":["prerender","hot","ctx","create_if_block_3","if_block1","create_if_block_2","insert_hydration","target","anchor","t0_value","dirty","set_data","t0","create_if_block_1","create_if_block","attr","li0","li0_aria_current_value","li1","li1_aria_current_value","li2","li2_aria_current_value","div0","div1","header","append_hydration","div2","nav","svg0","path0","ul","a1","a2","a3","svg1","path1","div3","heightValue","walletError","wallet","balance","height","value","$$invalidate","updateHeight","newHeight","handleNotifications","data","d","onMount","BaseWallet","IndexedDBProvider","FutureWallet","e","electrum","ElectrumClient","ElectrumTransport","div","main","footer"],"mappings":"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"}
{"version":3,"file":"7.Cg37DLSb.js","sources":["../../../../../../src/routes/protocol/+page.ts","../../../../../../src/routes/protocol/+page.md"],"sourcesContent":["import { dev } from '$app/environment';\n\n// we don't need any JS on this page, though we'll load\n// it in dev so that we get hot module replacement\nexport const csr = dev;\n\n// since there's no dynamic data here, we can prerender\n// it so that it gets served as a static asset in production\nexport const prerender = true;\n","# Future Bitcoin Cash - An Implementation Guide\n\nThis guide is for wallet maintainers and defi builders/inventors who what to interface with, display or use FBCH in their software.\n\nThis is a fuller exposition of a message to the Electron Cash team in their telegram channel that caused the author's Telegram account to be temporary restricted.\n\n > TL;DR. There is [DNS-resolved](https://cashtokens.org/docs/bcmr/chip#dns-resolved-registries) BCMR metadata for FBCH series (to date) [here](https://futurebitcoin.cash/.well-known/bitcoin-cash-metadata-registry.json). I'd also be happy to craft integrations for any wallet looking to have FBCH in their [embedded registry](https://cashtokens.org/docs/bcmr/chip#embedded-registries) or that wants tooling specific to FBCH integrated. Such as prepackaged metadata integration for [Electron Cash here](https://github.com/2qx/future-bitcoin-cash/tree/main/metadata/electron-cash)\n\n\n# Introduction\n\nFuture Bitcoin Cash fungible token series represent time-locked BCH on a 1:1 basis. Each series is denoted by the block time when redemption opens. There's a different series about every week, or every 1000 blocks.\n\nTokens are minted into vaults by a set of anyone-can-spend gantry contracts. There are four such contracts, for different powers of 10. Each gantry was in-turn minted by a single anyone-can-spend [battery contract](https://explorer.electroncash.de/address/bitcoincash:pd3hc4smdeu4kpwyvjq645d0ts5n9wxgvp3x7gg3my65u2kkw766xxxl8wdgp).\n\nThe system secures it's own financing for fees and token utxo dust. It was funded with about 47M sats to deploy weekly fungible token series for the first century of operation.\n\nThe system uses an NFT batons to authenticate \"valid\" token mints and also track state.\n\n## Validating Yet to be Minted FBCH Series\n\nFuture Bitcoin Cash (FBCH) was designed to make it trivial for wallet maintainers to validate new FBCH series as they're printed. \n\nIt should be trivial with the software or libraries you already use. \n\nGiven a CashToken categoryId, is it a future?\n\n    // Could this be an FBCH token?\n    09dabc81889bd7d1301f7e0620301460bcc0f754ab9b9838b881b72182b1d502\n\n### FBCH identification and validation process:\n\n1. Get the transaction before the minting TX using the categoryId.\n2. Verify that the first output sends to a FBCH gantry.\n3. Verify that the token category is the FBCH minting baton (`fbc0b000 ...`).\n4. The value of the mutable NFT commitment is the FBCH series number (little endian).\n\nAs noted in the audit, step two assures the token was minted with a fixed known supply, enforced contractually by the gantry. \n\nStep three is necessary to assure users are getting tokens from a known canonical set, because it's possible to spam vaults duplicate mintings of different categories, which would damage fungibility and shard liquidity across market pools.\n\nBelow is an example of the first output of a pre-genesis transaction:\n\n```json\n\n...\n\n\"vout\": [\n        {\n            \"value\": 0.42440502,\n            \"n\": 0,\n            \"scriptPubKey\": {\n                \"asm\": \"OP_HASH256 abde46afe7656ed85e92ba9be56286bae53f77321333c77fb3db90e28445e010 OP_EQUAL\",\n                \"hex\": \"aa20abde46afe7656ed85e92ba9be56286bae53f77321333c77fb3db90e28445e01087\",\n                \"reqSigs\": 1,\n                \"type\": \"scripthash\",\n                \"addresses\": [\n                    \"bitcoincash:pw4au340uajkakz7j2afhetzs6aw20mhxgfn83mlk0depc5yghspqqqckly70\"\n                ]\n            },\n            \"tokenData\": {\n                \"category\": \"fbc0b001313509454331f23f4b1891a8d9a284421efcc33187f1a1cdd37ccb46\",\n                \"amount\": \"0\",\n                \"nft\": {\n                    \"capability\": \"mutable\",\n                    \"commitment\": \"e8320d00\"\n                }\n            }\n        },\n        ...\n    }\n```\n\nThe full Future Bitcoin Cash Baton category is:\n\n    fbc0b001313509454331f23f4b1891a8d9a284421efcc33187f1a1cdd37ccb46\n\nThe NFT Commitment contains block time of the series in little endian: `e8320d00` (i.e. 865000)\n\nBelow is a complete list to all valid gantries printing FBCH series, with links and step parameter. \n\n| Gantry Contract Public Key Hashes                                      |      Step | Explorer                                                                                                                          |\n| :--------------------------------------------------------------------- | --------: | -------------------------------------------------------------------------------------------------------------------------: |\n| aa20abde46afe7656ed85e92ba9be56286bae53f77321333c77fb3db90e28445e01087 |     1,000 | [link](https://explorer.electroncash.de/address/bitcoincash:pw4au340uajkakz7j2afhetzs6aw20mhxgfn83mlk0depc5yghspqqqckly70) |\n| aa208b8bbab9023ff4c94e3ba458d213c5f629cf4d2f750a813e3855fa8b88f7790087 |    10,000 | [link](https://explorer.electroncash.de/address/bitcoincash:pw9chw4eqgllfj2w8wj935snchmznn6d9a6s4qf78p2l4zug7ausqxsg2dxve) |\n| aa206cf5cd944ca7cf45ed3a3075694fea5f7ad92d0011784c896238049653e405f987       |   100,000 |             [link](https://explorer.electroncash.de/address/pdk0tnv5fjnu730d8gc82620af0h4kfdqqghsnyfvguqf9jnuszljj3fnpfhq) |\n| aa204e1a8669275f0b5c1deaa1f168de429a8dc53f91acc489dbc819239ebc9a155787 | 1,000,000 | [link](https://explorer.electroncash.de/address/bitcoincash:pd8p4pnfya0skhqaa2slz6x7g2dgm3fljxkvfzwmeqvj884ung24w2mx7x8yd) |\n\nNote that, 90% of the time, the pre-genesis transaction for a token series is also the genesis transaction for the preceding series. In this case, the OP_RETURN should say FBCH, with the series number being currently minted, which is **NOT** the series number corresponding to the next mint.\n\n## A century of metadata in zero requests.\n\nFrom the validation process, it'd be fairly simply to develop a cache of known FBCH series, or to import this data into a local registry.\n\nThe series number and categoryId can be transformed to metadata with a simple function where:\n\n- All FBCH series use 8 decimals.\n- The ticker is \"FBCH\" followed by a dash and seven digit zero padded series number. (`^FBCH-\\d{7}$`)\n- The name is \"Future BCH \" followed by the series number the user's locale.\n- The description is as follows: \n\n> A fungible token redeemable for Bitcoin Cash after block _LOCALE_SERIES_STRING_\n\nWith all decimals and text known, that only leaves icons.\n\n"],"names":["csr","dev","prerender","insert_hydration","target","nav","anchor","h10","p0","blockquote0","p3","p4","p5","p6","h20","p7","p9","p10","ol1","p11","p12","p13","pre","p14","p15","p16","p17","table"],"mappings":"kPAIO,MAAMA,GAAMC,GAINC,GAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;o6NCRzBC,EAAAC,EAAAC,EAAAC,CAAA,WAMAH,EAAAC,EAAAG,EAAAD,CAAA,WAGEH,EAAAC,EAAAI,EAAAF,CAAA,6BAgBMH,EAAAC,EAAAK,EAAAH,CAAA,6BAE0BH,EAAAC,EAAAM,EAAAJ,CAAA,WAClCH,EAAAC,EAAAO,EAAAL,CAAA,WAIiEH,EAAAC,EAAAQ,EAAAN,CAAA,WACXH,EAAAC,EAAAS,EAAAP,CAAA,WACtDH,EAAAC,EAAAU,EAAAR,CAAA,WAG6HH,EAAAC,EAAAW,EAAAT,CAAA,+BAE1EH,EAAAC,EAAAY,EAAAV,CAAA,YAEMH,EAAAC,EAAAa,EAAAX,CAAA,+BASzDH,EAAAC,EAAAc,EAAAZ,CAAA,YAC4BH,EAAAC,EAAAe,EAAAb,CAAA,YACiFH,EAAAC,EAAAgB,EAAAd,CAAA,YACrFH,EAAAC,EAAAiB,EAAAf,CAAA,YACxBH,EAAAC,EAAAkB,EAAAhB,CAAA,uBA2BmCH,EAAAC,EAAAmB,EAAAjB,CAAA,YACuCH,EAAAC,EAAAoB,EAAAlB,CAAA,YACqCH,EAAAC,EAAAqB,EAAAnB,CAAA,YACTH,EAAAC,EAAAsB,EAAApB,CAAA,YACtGH,EAAAC,EAAAuB,EAAArB,CAAA"}
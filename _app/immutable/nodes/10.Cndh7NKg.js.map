{"version":3,"file":"10.Cndh7NKg.js","sources":["../../../../../../src/routes/wallet/+page.ts","../../../../../../src/lib/images/wallet.svg","../../../../../../src/routes/wallet/+page.svelte"],"sourcesContent":["import { dev } from '$app/environment';\n\n\n// since there's no dynamic data here, we can prerender\n// it so that it gets served as a static asset in production\nexport const prerender = true;\n","export default \"__VITE_ASSET__BqViQBN$__\"","<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport hot from '$lib/images/hot.svg';\n\timport walletIcon from '$lib/images/wallet.svg';\n\timport { receiptAddress } from '$lib/store.js';\n\timport { copy } from 'svelte-copy';\n\timport { toast } from '@zerodevx/svelte-toast';\n\timport { ElectrumCluster, ClusterOrder, ElectrumTransport } from 'electrum-cash';\n\timport { ElectrumNetworkProvider } from 'cashscript';\n\timport { IndexedDBProvider } from '@mainnet-cash/indexeddb-storage';\n\timport { BaseWallet } from 'mainnet-js';\n\timport { FutureWallet, isTokenAddress } from '@fbch/lib';\n\n\tlet receiptAddressValue: string;\n\tlet receiptAddressRaw: string;\n\tlet receiptError = false;\n\tlet walletError = false;\n\tlet showInfo = false;\n\tlet wallet;\n\tlet walletThreads;\n\tlet balance;\n\tlet provider;\n\n\treceiptAddress.subscribe((value: any) => {\n\t\tconsole.log(receiptAddressRaw);\n\t\treceiptAddressValue = value;\n\t});\n\n\tfunction updateReceiptAddress(newVal: any) {\n\t\tconsole.log(receiptAddressValue);\n\t\treceiptAddress.set(newVal);\n\t}\n\n\tonMount(async () => {\n\t\ttry {\n\t\t\tlet cluster = new ElectrumCluster('@fbch/app', \"1.4.3\", 1, 1, ClusterOrder.RANDOM, 2000);\n\n\t\t\tcluster.addServer('bch.imaginary.cash', 50004, ElectrumTransport.WSS.Scheme, false);\n\t\t\tprovider = new ElectrumNetworkProvider('mainnet', cluster, false);\n\n\t\t\tBaseWallet.StorageProvider = IndexedDBProvider;\n\t\t\twallet = await FutureWallet.named('hot');\n\t\t\tbalance = await wallet.getBalance('bch');\n\t\t\twalletThreads = provider.getUtxos(wallet.getDepositAddress());\n\t\t} catch (e) {\n\t\t\twalletError = true;\n\t\t\tthrow e;\n\t\t}\n\t});\n\n\tconst toggleSeed = () => {\n\t\tshowInfo = !showInfo;\n\t};\n\tconst validateReceiptAddress = async () => {\n\t\tif (isTokenAddress(receiptAddressRaw)) {\n\t\t\treceiptAddressValue = receiptAddressRaw;\n\t\t\tupdateReceiptAddress(receiptAddressValue);\n\t\t} else {\n\t\t\treceiptError = true;\n\t\t}\n\t};\n</script>\n\n<div class=\"text-column\">\n\t{#if !receiptAddressValue}\n\t\t<p>\n\t\t\tThis FBCH app uses a <b>temporary</b> hot web wallet to swap Future tokens and BCH.\n\t\t</p>\n\t\t<p>\n\t\t\tPlease enter an external wallet address where your tokens and BCH change will be sent for long\n\t\t\tterm storage:\n\t\t</p>\n\t\t{#if receiptError}\n\t\t\t<b\n\t\t\t\t>Your long-term address must be a valid <i>CashToken</i> Bitcoin Cash (BCH) cash addressâ€•like\n\t\t\t\t\"bitcoincash:zq ...\"</b\n\t\t\t>\n\t\t{/if}\n\t\t<div style=\"display:flex;\">\n\t\t\t<img src={walletIcon} alt=\"wallet\" />\n\t\t\t<textarea\n\t\t\t\tid=\"addr\"\n\t\t\t\trows=\"3\"\n\t\t\t\tstyle=\"line-break:anywhere;\"\n\t\t\t\tbind:value={receiptAddressRaw}\n\t\t\t\ton:change={validateReceiptAddress}\n\t\t\t\tplaceholder=\"bitcoincash:zq... ...\"\n\t\t\t/>\n\t\t</div>\n\t\t<div>\n\t\t\t<p>\n\t\t\t\tIf you do not have a <a target=\"_blank\" href=\"https://cashtokens.org\">CashToken</a> wallet, select\n\t\t\t\tone below:\n\t\t\t</p>\n\t\t\t<h3>CashToken Wallets:</h3>\n\t\t\t<ul>\n\t\t\t\t<li>\n\t\t\t\t\tDesktop\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://electroncash.org/\">Electron Cash</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://github.com/cashonize/cashonize-quasar/releases\"\n\t\t\t\t\t\t\t\t>Cashonize Quasar</a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\tWeb\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://cashonize.com/\">Cashonize</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t\thref=\"https://chromewebstore.google.com/detail/paytaca/pakphhpnneopheifihmjcjnbdbhaaiaa\"\n\t\t\t\t\t\t\t\t>Paytaca Chrome Extension</a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t\t<li>\n\t\t\t\t\tMobile\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://www.paytaca.com/#wallet\">Paytaca</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"https://zapit.io/#/\">Zapit</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ul>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t</div>\n\t{:else if wallet}\n\t\t<h4>FBCH hot wallet</h4>\n\t\t<qr-code\n\t\t\tid=\"qr1\"\n\t\t\tcontents={wallet.getDepositAddress()}\n\t\t\tmodule-color=\"#000\"\n\t\t\tposition-ring-color=\"#88338A\"\n\t\t\tposition-center-color=\"#FF00EA\"\n\t\t\tmask-x-to-y-ratio=\"1.2\"\n\t\t\tstyle=\"width: 250px;\n\theight: 250px;\n\tmargin: 1em auto;\n\tbackground-color: #fff;\"\n\t\t>\n\t\t\t<img width=\"52\" src={hot} slot=\"icon\" />\n\t\t</qr-code>\n\t\t<div\n\t\t\tuse:copy={wallet.getDepositAddress()}\n\t\t\ton:svelte-copy={(event) => toast.push('OK ðŸ“‹ðŸ—¸: ' + event.detail)}\n\t\t\ton:svelte-copy:error={(event) =>\n\t\t\t\ttoast.push(`Error, no access to clipboard?: ${event.detail.message}`, {\n\t\t\t\t\tclasses: ['warn']\n\t\t\t\t})}\n\t\t>\n\t\t\t<div style=\"display:flex;\">\n\t\t\t\t<img width=\"52px\" src={hot} alt=\"hot wallet\" />\n\t\t\t\t<div>\n\t\t\t\t\t<button class=\"styled\">\n\t\t\t\t\t\t{wallet.getDepositAddress()}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div>\n\t\t\t<p>This is your FBCH hot wallet deposit address.</p>\n\t\t\t<p>Send money here to swap futures, then sweep assets back to your wallet.</p>\n\t\t</div>\n\n\t\t<div on:click={toggleSeed}>Show/hide backup</div>\n\t\t{#if showInfo}\n\t\t\t<div\n\t\t\t\tuse:copy={wallet.toDbString()}\n\t\t\t\ton:svelte-copy={(event) => toast.push('OK - backup copied')}\n\t\t\t\ton:svelte-copy:error={(event) =>\n\t\t\t\t\ttoast.push(`Error, no access to clipboard?: ${event.detail.message}`, {\n\t\t\t\t\t\tclasses: ['warn']\n\t\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{wallet.toDbString()}\n\t\t\t</div>\n\t\t{/if}\n\n\t\t{#if walletThreads}\n\t\t\t<button on:click={() => wallet.preparePlacementOutpoints()}> Prepare Wallet Outpoints</button>\n\t\t\t{#if walletThreads.length > 0}\n\t\t\t\t<table class=\"wallet\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr class=\"header\">\n\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t<td>BCH </td>\n\t\t\t\t\t\t\t<td>Tokens </td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t{#each walletThreads as c, i (i)}\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t><button on:click={() => handlePlacement(Number(c.satoshis) - 800)}>place</button\n\t\t\t\t\t\t\t\t\t></td\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<td class=\"r\">{(Number(c.satoshis) / 1000000000).toFixed(10)} </td>\n\t\t\t\t\t\t\t\t<td class=\"r\"\n\t\t\t\t\t\t\t\t\t><i>\n\t\t\t\t\t\t\t\t\t\t{#if c.token}\n\t\t\t\t\t\t\t\t\t\t\t{(Number(c.token.amount) / 100000000).toLocaleString()}\n\t\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t</i></td\n\t\t\t\t\t\t\t\t></tr\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t{:else}\n\t\t\t\t<p>no wallet utxos available</p>\n\t\t\t{/if}\n\t\t{:else}\n\t\t\t<p>loading wallet...</p>\n\t\t{/if}\n\t{/if}\n</div>\n\n<style>\n\tul {\n\t\tlist-style: none;\n\t}\n\ttextarea {\n\t\twidth: 90%;\n\t\tborder-radius: 10px;\n\t\tbackground: #f4ffee;\n\t\tborder-width: 5px;\n\t\tfont-weight: 500;\n\t}\n\n\t.styled {\n\t\tborder-color: #000;\n\t\tfont-size: 1rem;\n\t\tline-break: anywhere;\n\t\ttext-align: center;\n\t\tcolor: #000;\n\t\tborder-radius: 10px;\n\t\tbackground-color: #ffe2ff;\n\t\tfont-weight: 700;\n\t\tpadding: 5px;\n\t\tbox-shadow:\n\t\t\tinset 2px 2px 3px rgba(255, 255, 255, 0.6),\n\t\t\tinset -2px -2px 3px rgba(0, 0, 0, 0.6);\n\t}\n\n\t.styled:hover {\n\t\tbackground-color: rgb(238, 54, 255);\n\t}\n\n\t.styled:active {\n\t\tbox-shadow:\n\t\t\tinset -2px -2px 3px rgba(255, 255, 255, 0.6),\n\t\t\tinset 2px 2px 3px rgba(0, 0, 0, 0.6);\n\t}\n</style>\n"],"names":["prerender","walletIcon","t4_value","ctx","create_if_block_6","create_if_block_3","hot","attr","img0","img0_src_value","set_custom_element_data","qr_code","qr_code_contents_value","img1","img1_src_value","insert_hydration","target","h4","anchor","append_hydration","div2","div1","div0","button","div3","div4","action_destroyer","copy_action","copy","dirty","set_data","t4","is_function","create_if_block_1","img","img_src_value","p0","p1","textarea","t_value","div","t","p","create_if_block_4","i","table","thead","tbody","if_block","create_if_block_5","tr","td0","td1","td2","i_1","t2","t2_value","b","create_if_block","create_if_block_2","receiptAddressValue","receiptAddressRaw","receiptError","showInfo","wallet","walletThreads","balance","provider","receiptAddress","value","$$invalidate","updateReceiptAddress","newVal","onMount","cluster","ElectrumCluster","ClusterOrder","ElectrumTransport","ElectrumNetworkProvider","BaseWallet","IndexedDBProvider","FutureWallet","e","toggleSeed","validateReceiptAddress","isTokenAddress","event","toast","c"],"mappings":"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"}
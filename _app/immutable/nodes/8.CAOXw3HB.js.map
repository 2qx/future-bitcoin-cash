{"version":3,"file":"8.CAOXw3HB.js","sources":["../../../../../../src/routes/write/+page.ts","../../../../../../src/routes/write/+page.svelte"],"sourcesContent":["import { dev } from '$app/environment';\n\n// we don't need any JS on this page, though we'll load\n// it in dev so that we get hot module replacement\nexport const csr = dev;\n\n// since there's no dynamic data here, we can prerender\n// it so that it gets served as a static asset in production\nexport const prerender = true;\n","<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { Vault, getFutureBlockDate } from '@fbch/lib';\n\timport SeriesIcon from '$lib/images/SeriesIcon.svelte';\n\timport { height } from '$lib/store.js';\n\tconst series = [3, 4, 5, 6];\n\tlet s = 4;\n\tlet coupons = [];\n\tlet duplicateCoupons = 1;\n\tlet placement = 1\n\tlet rate = 20;\n\tlet totalSpend = 0;\n\tlet totalPlacement = 0;\n\tlet heightValue = 857000;\n\n\theight.subscribe((value: any) => {\n\t\theightValue = value;\n\t});\n\n\tfunction updateCoupons() {\n\t\tlet addresses = Vault.getCouponSeries(heightValue, placement*1e8, s, s == 6 ? 4 : undefined);\n\t\tlet times = Vault.getSeriesTimes(heightValue, s, s == 6 ? 4 : undefined);\n\n\t\tcoupons = addresses.map(function (a, i) {\n\t\t\tif(((times[i] - heightValue) * rate) > 543){\n\t\t\t\treturn [\n\t\t\t\t...Array(duplicateCoupons).fill({\n\t\t\t\t\ttime: times[i],\n\t\t\t\t\taddress: a,\n\t\t\t\t\tplacement: placement,\n\t\t\t\t\tamount: Math.floor(((times[i] - heightValue) * rate)) / 1e8\n\t\t\t\t})\n\t\t\t];\n\t\t\t}else{\n\t\t\t\treturn []\n\t\t\t}\n\t\t\t\n\t\t});\n\t\tcoupons = coupons.flat();\n\t\ttotalPlacement = coupons.reduce(function (acc, obj) {\n\t\t\treturn acc + obj.placement;\n\t\t}, 0);\n\t\ttotalSpend = coupons.reduce(function (acc, obj) {\n\t\t\treturn acc + obj.amount;\n\t\t}, 0);\n\t\tconsole.log(coupons);\n\t}\n\n\tonMount(async () => {\n\t\tupdateCoupons();\n\t});\n</script>\n\n<svelte:head>\n\t<title>Write</title>\n\t<meta name=\"description\" content=\"Write Coupons\" />\n</svelte:head>\n\n<div class=\"text-column\">\n\t<h1>Write coupons</h1>\n\t<div id=\"control\">\n\t\t<div>\n\t\t\tCoupon: <br>\n\t\t\t1 BCH\n\t\t</div>\n\t\t<div>\n\t\t\t<label>\n\t\t\t\tRate: {rate} spb<br>\n\t\t\t\t<input type=\"range\" on:change={() => updateCoupons()} bind:value={rate} min=\"1\" step=\"0.2\" max=\"50\" />\n\t\t\t</label>\n\t\t</div>\n\t\t<div>\n\t\t\t<label>\n\t\t\t\tCopies: {duplicateCoupons}<br>\n\t\t\t\t<input\n\t\t\t\t\ttype=\"range\"\n\t\t\t\t\ton:change={() => updateCoupons()}\n\t\t\t\t\tbind:value={duplicateCoupons}\n\t\t\t\t\tmin=\"1\"\n\t\t\t\t\tmax=\"40\"\n\t\t\t\t/>\n\t\t\t</label>\n\t\t</div>\n\t\t\n\n\t\t<div>\n\t\t\t{#each series as number}\n\t\t\t\t<label>\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\t\tname=\"s\"\n\t\t\t\t\t\tvalue={number}\n\t\t\t\t\t\tbind:group={s}\n\t\t\t\t\t\ton:change={() => updateCoupons()}\n\t\t\t\t\t/>\n\n\t\t\t\t\tE{number} series<br />\n\t\t\t\t</label>\n\t\t\t{/each}\n\t\t</div>\n\t</div>\n\n\t<div>\n\t\tIncentivize locking up to {totalPlacement} BCH\n\t</div>\n\t<div id=\"total\">\n\t\tTotal: {totalSpend}<br />\n\t</div>\n\t<hr>\n\t<div id=\"mono\">\n\t\t{#each coupons as c}\n\t\t\t{c.address}, {c.amount}<br />\n\t\t{/each}\n\t</div>\n</div>\n\n<style>\n\t#control {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n\t#control div {\n\t\tflex: 1 0 20%;\n\t\tborder: 1px solid black;\n\t\tpadding: 0.2em;\n\t}\n\t#mono {\n\t\tfont-family: monospace;\n\t}\n\t#total {\n\t\ttext-align: right;\n\t}\n</style>\n"],"names":["csr","dev","prerender","ctx","insert_hydration","target","label","anchor","append_hydration","input","br","t0_value","t2_value","dirty","set_data","t0","t2","i","meta","div8","h1","div4","div0","div1","label0","br1","input0","div2","label1","br2","input1","div3","div5","div6","br3","hr","div7","placement","series","s","coupons","duplicateCoupons","rate","totalSpend","totalPlacement","heightValue","height","value","updateCoupons","addresses","Vault","times","$$invalidate","a","acc","obj","onMount","to_number"],"mappings":"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"}
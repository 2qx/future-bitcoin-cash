import{d as gt}from"../chunks/index.R8ovVqwX.js";import{s as Ct,b as yt,i as Bt,n as st,r as et,o as Et}from"../chunks/scheduler.CoKJEDLV.js";import{S as Ht,i as Tt,e as r,s as g,t as d,p as kt,c as i,d as f,f as C,a as R,o as Y,b as p,m as _,h as t,g as Z,D as he,E as A,j as le,y as $e,F as bt,G as rt}from"../chunks/index.PTRJg19q.js";import{e as ce,h as Lt,C as it,a as ut,V as ct}from"../chunks/vault.DhCIUhtN.js";import{c as Mt}from"../chunks/copy.CPFc3Dt_.js";import{t as ht}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.8ep8mfxG.js";const St=gt,Pt=!0,Nt=Object.freeze(Object.defineProperty({__proto__:null,csr:St,prerender:Pt},Symbol.toStringTag,{value:"Module"}));function dt(a,o,l){const n=a.slice();return n[7]=o[l],n}function pt(a,o,l){const n=a.slice();return n[23]=o[l],n}function _t(a,o,l){const n=a.slice();return n[26]=o[l],n}function ft(a){let o,l,n,c,m,H,u=Math.pow(10,a[26]).toLocaleString()+"",v,P,E,I,T,V,w;return T=bt(a[10][1]),{c(){o=r("label"),l=r("input"),n=d(`
					C`),c=r("sub"),m=d(a[26]),H=d(" Series - "),v=d(u),P=d(" BCH "),E=r("br"),I=g(),this.h()},l(h){o=i(h,"LABEL",{});var b=R(o);l=i(b,"INPUT",{type:!0,name:!0}),n=p(b,`
					C`),c=i(b,"SUB",{});var x=R(c);m=p(x,a[26]),x.forEach(f),H=p(b," Series - "),v=p(b,u),P=p(b," BCH "),E=i(b,"BR",{}),I=C(b),b.forEach(f),this.h()},h(){_(l,"type","radio"),_(l,"name","c"),l.__value=a[26],he(l,l.__value),T.p(l)},m(h,b){Z(h,o,b),t(o,l),l.checked=l.__value===a[7],t(o,n),t(o,c),t(c,m),t(o,H),t(o,v),t(o,P),t(o,E),t(o,I),V||(w=[A(l,"change",a[9]),A(l,"change",a[11])],V=!0)},p(h,b){b&128&&(l.checked=l.__value===h[7])},d(h){h&&f(o),T.r(),V=!1,et(w)}}}function vt(a){let o,l,n,c,m,H=Math.pow(10,a[23]).toLocaleString()+"",u,v,P,E,I,T,V;return I=bt(a[10][0]),{c(){o=r("label"),l=r("input"),n=d(`
					V`),c=d(a[23]),m=d(" Series - "),u=d(H),v=g(),P=r("br"),E=g(),this.h()},l(w){o=i(w,"LABEL",{});var h=R(o);l=i(h,"INPUT",{type:!0,name:!0}),n=p(h,`
					V`),c=p(h,a[23]),m=p(h," Series - "),u=p(h,H),v=C(h),P=i(h,"BR",{}),E=C(h),h.forEach(f),this.h()},h(){_(l,"type","radio"),_(l,"name","s"),l.__value=a[23],he(l,l.__value),I.p(l)},m(w,h){Z(w,o,h),t(o,l),l.checked=l.__value===a[0],t(o,n),t(o,c),t(o,m),t(o,u),t(o,v),t(o,P),t(o,E),T||(V=[A(l,"change",a[16]),A(l,"change",a[17])],T=!0)},p(w,h){h&1&&(l.checked=l.__value===w[0])},d(w){w&&f(o),I.r(),T=!1,et(V)}}}function mt(a){let o=a[7].address+"",l,n,c=a[7].amount+"",m,H;return{c(){l=d(o),n=d(", "),m=d(c),H=r("br")},l(u){l=p(u,o),n=p(u,", "),m=p(u,c),H=i(u,"BR",{})},m(u,v){Z(u,l,v),Z(u,n,v),Z(u,m,v),Z(u,H,v)},p(u,v){v&2&&o!==(o=u[7].address+"")&&le(l,o),v&2&&c!==(c=u[7].amount+"")&&le(m,c)},d(u){u&&(f(l),f(n),f(m),f(H))}}}function It(a){let o,l,n,c,m="Let's write some coupons!",H,u,v="<b>This is an advanced feature for power users. There is no way to undo writing a coupon.</b>",P,E,I=`Coupons incentivize money being spent 1) at a specific destination, 2) above some minimum
		amount, and 3) with restrictions like: limit one per customer.`,T,V,w=`Future vault coupons are plain bitcoin cash unspent transaction outputs (UTXOs) that have been
		sent to, and are then locked by a <a href="/contracts#coupon">simple contract</a> to incentivize
		spending money at a specific destination (a FBCH token vault). For example, an output of 100k sats
		can be sent to a coupon contract to be used for locking at least 1 BCH (min. value) into 1 FBCH at
		a vault contract (destination).`,h,b,x=`Coupons values are denoted in BCH sats, where the value of the coupon is the value of the
		unspent output. A whole BCH could be split into 1000 coupons each offering 100k sats for
		placement, or 1 BCH coin could be sent to the coupon contract in one single output to let anyone
		lock a "free" FBCH.`,de,K,ve=`These &quot;C<sub>0</sub>&quot; series coupons are to lock 1 x 10^0 BCH, but there are
		smaller and larger amounts (i.e C<sub>1</sub> for 10 BCH placements and C<sub>-1</sub> for
		0.1 BCH vault placements).`,me,$,ke=`<b>Coupons are not refundable.</b>
		Money sent to a coupon holding contract can only be redeemed in a transaction that sends the required
		amount of value to a second predefined contract (i.e. a future vault).`,D,Q,ne=`Below is a simple tool for use with the <a href="https://electroncash.org/">Electron Cash</a> pay-to-many
		feature:`,W,y,z,Le,Me,Se,Pe,ae,F,Ie,be,Ve,ee,we,pe=(a[4]/20).toPrecision(2)+"",ge,Re,De,Ue,U,Ae,oe,G,Fe,Ce,Oe,Ne,O,qe,X,ze,te,je,ye,We,Ge,j,Ke,Be,Qe,Xe,Je,Ye,Ze,N,Ee,xe,tt,se=ce(it),k=[];for(let s=0;s<se.length;s+=1)k[s]=ft(_t(a,se,s));let re=ce(ut),L=[];for(let s=0;s<re.length;s+=1)L[s]=vt(pt(a,re,s));let ie=ce(a[1]),M=[];for(let s=0;s<ie.length;s+=1)M[s]=mt(dt(a,ie,s));return{c(){o=r("meta"),l=g(),n=r("div"),c=r("h1"),c.textContent=m,H=g(),u=r("blockquote"),u.innerHTML=v,P=g(),E=r("p"),E.textContent=I,T=g(),V=r("p"),V.innerHTML=w,h=g(),b=r("p"),b.textContent=x,de=g(),K=r("p"),K.innerHTML=ve,me=g(),$=r("p"),$.innerHTML=ke,D=g(),Q=r("p"),Q.innerHTML=ne,W=g(),y=r("div"),z=r("div"),Le=d("Placement: "),Me=r("br"),Se=g();for(let s=0;s<k.length;s+=1)k[s].c();Pe=g(),ae=r("div"),F=r("label"),Ie=d("Rate: "),be=d(a[4]),Ve=d(" spb , "),ee=r("i"),we=d("~"),ge=d(pe),Re=d("% "),De=r("br"),Ue=g(),U=r("input"),Ae=g(),oe=r("div"),G=r("label"),Fe=d("Copies: "),Ce=d(a[3]),Oe=r("br"),Ne=g(),O=r("input"),qe=g(),X=r("div");for(let s=0;s<L.length;s+=1)L[s].c();ze=g(),te=r("div"),je=d("Lock up to "),ye=d(a[6]),We=d(" FBCH"),Ge=g(),j=r("div"),Ke=d("Total: "),Be=d(a[5]),Qe=d(" BCH"),Xe=r("br"),Je=g(),Ye=r("hr"),Ze=g(),N=r("div");for(let s=0;s<M.length;s+=1)M[s].c();this.h()},l(s){const B=kt("svelte-174kz84",document.head);o=i(B,"META",{name:!0,content:!0}),B.forEach(f),l=C(s),n=i(s,"DIV",{class:!0});var e=R(n);c=i(e,"H1",{"data-svelte-h":!0}),Y(c)!=="svelte-bkv8ks"&&(c.textContent=m),H=C(e),u=i(e,"BLOCKQUOTE",{"data-svelte-h":!0}),Y(u)!=="svelte-1av7iv7"&&(u.innerHTML=v),P=C(e),E=i(e,"P",{"data-svelte-h":!0}),Y(E)!=="svelte-g3laio"&&(E.textContent=I),T=C(e),V=i(e,"P",{"data-svelte-h":!0}),Y(V)!=="svelte-gaho0i"&&(V.innerHTML=w),h=C(e),b=i(e,"P",{"data-svelte-h":!0}),Y(b)!=="svelte-1uz01x7"&&(b.textContent=x),de=C(e),K=i(e,"P",{"data-svelte-h":!0}),Y(K)!=="svelte-1o28nvo"&&(K.innerHTML=ve),me=C(e),$=i(e,"P",{"data-svelte-h":!0}),Y($)!=="svelte-17orl32"&&($.innerHTML=ke),D=C(e),Q=i(e,"P",{"data-svelte-h":!0}),Y(Q)!=="svelte-15bll3f"&&(Q.innerHTML=ne),W=C(e),y=i(e,"DIV",{id:!0,class:!0});var S=R(y);z=i(S,"DIV",{class:!0});var _e=R(z);Le=p(_e,"Placement: "),Me=i(_e,"BR",{}),Se=C(_e);for(let q=0;q<k.length;q+=1)k[q].l(_e);_e.forEach(f),Pe=C(S),ae=i(S,"DIV",{class:!0});var lt=R(ae);F=i(lt,"LABEL",{});var J=R(F);Ie=p(J,"Rate: "),be=p(J,a[4]),Ve=p(J," spb , "),ee=i(J,"I",{});var He=R(ee);we=p(He,"~"),ge=p(He,pe),Re=p(He,"% "),He.forEach(f),De=i(J,"BR",{}),Ue=C(J),U=i(J,"INPUT",{type:!0,min:!0,step:!0,max:!0}),J.forEach(f),lt.forEach(f),Ae=C(S),oe=i(S,"DIV",{class:!0});var nt=R(oe);G=i(nt,"LABEL",{});var ue=R(G);Fe=p(ue,"Copies: "),Ce=p(ue,a[3]),Oe=i(ue,"BR",{}),Ne=C(ue),O=i(ue,"INPUT",{type:!0,min:!0,max:!0}),ue.forEach(f),nt.forEach(f),qe=C(S),X=i(S,"DIV",{id:!0,class:!0});var at=R(X);for(let q=0;q<L.length;q+=1)L[q].l(at);at.forEach(f),S.forEach(f),ze=C(e),te=i(e,"DIV",{});var Te=R(te);je=p(Te,"Lock up to "),ye=p(Te,a[6]),We=p(Te," FBCH"),Te.forEach(f),Ge=C(e),j=i(e,"DIV",{id:!0,class:!0});var fe=R(j);Ke=p(fe,"Total: "),Be=p(fe,a[5]),Qe=p(fe," BCH"),Xe=i(fe,"BR",{}),fe.forEach(f),Je=C(e),Ye=i(e,"HR",{}),Ze=C(e),N=i(e,"DIV",{id:!0,class:!0});var ot=R(N);for(let q=0;q<M.length;q+=1)M[q].l(ot);ot.forEach(f),e.forEach(f),this.h()},h(){document.title="Write",_(o,"name","description"),_(o,"content","Write Coupons"),_(z,"class","svelte-vxd5yl"),_(U,"type","range"),_(U,"min","1"),_(U,"step","0.2"),_(U,"max","100"),_(ae,"class","svelte-vxd5yl"),_(O,"type","range"),_(O,"min","1"),_(O,"max","40"),_(oe,"class","svelte-vxd5yl"),_(X,"id","dataTable"),_(X,"class","svelte-vxd5yl"),_(y,"id","control"),_(y,"class","svelte-vxd5yl"),_(j,"id","total"),_(j,"class","svelte-vxd5yl"),_(N,"id","mono"),_(N,"class","svelte-vxd5yl"),_(n,"class","text-column")},m(s,B){t(document.head,o),Z(s,l,B),Z(s,n,B),t(n,c),t(n,H),t(n,u),t(n,P),t(n,E),t(n,T),t(n,V),t(n,h),t(n,b),t(n,de),t(n,K),t(n,me),t(n,$),t(n,D),t(n,Q),t(n,W),t(n,y),t(y,z),t(z,Le),t(z,Me),t(z,Se);for(let e=0;e<k.length;e+=1)k[e]&&k[e].m(z,null);t(y,Pe),t(y,ae),t(ae,F),t(F,Ie),t(F,be),t(F,Ve),t(F,ee),t(ee,we),t(ee,ge),t(ee,Re),t(F,De),t(F,Ue),t(F,U),he(U,a[4]),t(y,Ae),t(y,oe),t(oe,G),t(G,Fe),t(G,Ce),t(G,Oe),t(G,Ne),t(G,O),he(O,a[3]),t(y,qe),t(y,X);for(let e=0;e<L.length;e+=1)L[e]&&L[e].m(X,null);t(n,ze),t(n,te),t(te,je),t(te,ye),t(te,We),t(n,Ge),t(n,j),t(j,Ke),t(j,Be),t(j,Qe),t(j,Xe),t(n,Je),t(n,Ye),t(n,Ze),t(n,N);for(let e=0;e<M.length;e+=1)M[e]&&M[e].m(N,null);xe||(tt=[A(U,"change",a[12]),A(U,"change",a[13]),A(U,"input",a[13]),A(O,"change",a[14]),A(O,"change",a[15]),A(O,"input",a[15]),yt(Ee=Mt.call(null,N,a[2])),A(N,"svelte-copy",a[18]),A(N,"svelte-copy:error",a[19])],xe=!0)},p(s,[B]){if(B&384){se=ce(it);let e;for(e=0;e<se.length;e+=1){const S=_t(s,se,e);k[e]?k[e].p(S,B):(k[e]=ft(S),k[e].c(),k[e].m(z,null))}for(;e<k.length;e+=1)k[e].d(1);k.length=se.length}if(B&16&&le(be,s[4]),B&16&&pe!==(pe=(s[4]/20).toPrecision(2)+"")&&le(ge,pe),B&16&&he(U,s[4]),B&8&&le(Ce,s[3]),B&8&&he(O,s[3]),B&257){re=ce(ut);let e;for(e=0;e<re.length;e+=1){const S=pt(s,re,e);L[e]?L[e].p(S,B):(L[e]=vt(S),L[e].c(),L[e].m(X,null))}for(;e<L.length;e+=1)L[e].d(1);L.length=re.length}if(B&64&&le(ye,s[6]),B&32&&le(Be,s[5]),B&2){ie=ce(s[1]);let e;for(e=0;e<ie.length;e+=1){const S=dt(s,ie,e);M[e]?M[e].p(S,B):(M[e]=mt(S),M[e].c(),M[e].m(N,null))}for(;e<M.length;e+=1)M[e].d(1);M.length=ie.length}Ee&&Bt(Ee.update)&&B&4&&Ee.update.call(null,s[2])},i:st,o:st,d(s){s&&(f(l),f(n)),f(o),$e(k,s),$e(L,s),$e(M,s),xe=!1,et(tt)}}}function Vt(a){return a.map(l=>`${l.address}, ${l.amount}`).join(`\r
`)}function wt(a,o,l){let n=4,c=0,m=[],H="",u=1,v=20,P=0,E=0,I=857e3;Lt.subscribe(D=>{I=D});function T(){let D=Math.round((10**c+Number.EPSILON)*100)/100,Q=ct.getCouponSeries(I,D*1e8,n,n==6?4:void 0),ne=ct.getSeriesTimes(I,n,n==6?4:void 0);l(1,m=Q.map(function(W,y){return(ne[y]-I)*v>543?[...Array(u).fill({time:ne[y],address:W,placement:D,amount:Math.floor((ne[0]-I)*v*D)/1e8})]:[]}).flat()),l(2,H=Vt(m)),l(6,E=m.reduce(function(W,y){return W+y.placement},0)),l(6,E=Math.round(E*100)/100),l(5,P=m.reduce(function(W,y){return W+y.amount},0)),l(5,P=Math.floor(P*1e8)/1e8)}Et(async()=>{T()});const V=[[],[]];function w(){c=this.__value,l(7,c)}const h=()=>T(),b=()=>T();function x(){v=rt(this.value),l(4,v)}const de=()=>T();function K(){u=rt(this.value),l(3,u)}function ve(){n=this.__value,l(0,n)}return[n,m,H,u,v,P,E,c,T,w,V,h,b,x,de,K,ve,()=>T(),D=>ht.push("Coupons copied to clipboard"),D=>ht.push(`Error, no access to clipboard?: ${D.detail.message}`,{classes:["warn"]})]}class qt extends Ht{constructor(o){super(),Tt(this,o,wt,It,Ct,{})}}export{qt as component,Nt as universal};
//# sourceMappingURL=13.DB1zv1z3.js.map

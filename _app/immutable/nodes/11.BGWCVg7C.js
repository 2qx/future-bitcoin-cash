import{s as Je,o as Qe,a as be,b as Ge,i as We,r as Se,n as ne}from"../chunks/scheduler.CoKJEDLV.js";import{S as Xe,i as Ze,e as w,c as E,a as B,d as u,m as N,g as k,r as Z,u as _e,v as Y,w as ke,s as O,t as le,x as oe,o as V,f as P,b as ae,J as re,n as ee,h as $,C as J,j as pe,E as Ae,y as et,z as tt,A as it,B as st}from"../chunks/index.BGGdVmBl.js";import{r as Re,h as nt,i as ot,d as j,e as Le,u as rt,o as ct}from"../chunks/vault.DNwpf8Gw.js";import{h as $e}from"../chunks/hot.BU3uCGXT.js";import{b as lt}from"../chunks/bch.QnmS77Uw.js";import{S as at}from"../chunks/SeriesIcon.BXBPivo_.js";import{c as ze}from"../chunks/copy.CPFc3Dt_.js";import{t as Ce}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.8ep8mfxG.js";import{$ as fe,e as ge,M as ye,w as Oe,E as ht,B as ut,I as ft,F as dt}from"../chunks/wallet.axTrGK5Z.js";const pt=!0,Kt=Object.freeze(Object.defineProperty({__proto__:null,prerender:pt},Symbol.toStringTag,{value:"Module"})),mt=""+new URL("../assets/wallet.D7YPKv0S.svg",import.meta.url).href;function te(r,e,t,i){Object.defineProperty(r,e,{get:t,set:i,enumerable:!0,configurable:!0})}const he={client:fe("electrum-cash:client "),cluster:fe("electrum-cash:cluster"),errors:fe("electrum-cash:error  "),warning:fe("electrum-cash:warning"),network:fe("electrum-cash:network"),ping:fe("electrum-cash:pulses ")};he.client.color="2";he.cluster.color="3";he.errors.color="9";he.warning.color="13";he.network.color="4";he.ping.color="8";var D=he;class bt{static buildRequestObject(e,t,i){return JSON.stringify({method:e,params:t,id:i})}static get versionRegexp(){return/^\d+(\.\d+)+$/}static get statementDelimiter(){return`
`}}var ce=bt,je={};te(je,"isVersionRejected",()=>Ke);te(je,"isVersionNegotiated",()=>vt);const Ke=function(r){return"error"in r},vt=function(r){return"software"in r&&"protocol"in r};var Ye={};te(Ye,"ElectrumTransport",()=>U);te(Ye,"DefaultParameters",()=>x);var we={};te(we,"ClusterOrder",()=>de);te(we,"ClusterDistribution",()=>ve);te(we,"ClusterStatus",()=>W);te(we,"ClientState",()=>X);te(we,"ConnectionStatus",()=>q);var de;(function(r){r[r.RANDOM=0]="RANDOM",r[r.PRIORITY=1]="PRIORITY"})(de||(de={}));var ve;(function(r){r[r.ALL=0]="ALL"})(ve||(ve={}));var W;(function(r){r[r.DISABLED=0]="DISABLED",r[r.DEGRADED=1]="DEGRADED",r[r.READY=2]="READY"})(W||(W={}));var X;(function(r){r[r.UNAVAILABLE=0]="UNAVAILABLE",r[r.AVAILABLE=1]="AVAILABLE"})(X||(X={}));var q;(function(r){r[r.DISCONNECTED=0]="DISCONNECTED",r[r.CONNECTED=1]="CONNECTED",r[r.DISCONNECTING=2]="DISCONNECTING",r[r.CONNECTING=3]="CONNECTING",r[r.RECONNECTING=4]="RECONNECTING"})(q||(q={}));const U={TCP:{Port:50001,Scheme:"tcp"},TCP_TLS:{Port:50002,Scheme:"tcp_tls"},WS:{Port:50003,Scheme:"ws"},WSS:{Port:50004,Scheme:"wss"}},x={PORT:U.TCP_TLS.Port,TRANSPORT_SCHEME:U.TCP_TLS.Scheme,RECONNECT:15e3,TIMEOUT:12e4,PING_INTERVAL:3e3,CLUSTER_CONFIDENCE:1,CLUSTER_DISTRIBUTION:ve.ALL,CLUSTER_ORDER:de.RANDOM};class _t extends ge.EventEmitter{connect(e,t,i,s){if(this.tcpSocket||this.webSocket)throw new Error("Cannot initiate a new socket connection when an existing connection exists");this.timers.disconnect=setTimeout(()=>this.disconnectOnTimeout(e,t,s),s),this.once("connect",this.clearDisconnectTimerOnTimeout);const o={[U.TCP.Scheme]:"a TCP Socket",[U.TCP_TLS.Scheme]:"an encrypted TCP socket",[U.WS.Scheme]:"a WebSocket",[U.WSS.Scheme]:"an encrypted WebSocket"};if(D.network(`Initiating ${o[i]} connection to '${e}:${t}'.`),i===U.TCP.Scheme||i===U.TCP_TLS.Scheme){if(i===U.TCP_TLS.Scheme){const n={rejectUnauthorized:!1};$4QiMX$isIP(e)||(n.serverName=e),this.tcpSocket=$4QiMX$connect(t,e,n),this.tcpSocket.once("secureConnect",()=>{if(!(this.tcpSocket instanceof $4QiMX$TLSSocket))return;this.tcpSocket.authorizationError==="DEPTH_ZERO_SELF_SIGNED_CERT"&&D.warning(`Connection to ${e}:${t} uses a self-signed certificate`)}),this.tcpSocket.on("secureConnect",this.onConnect.bind(this,o[i],e,t))}else this.tcpSocket=$4QiMX$connect1({host:e,port:t}),this.tcpSocket.on("connect",this.onConnect.bind(this,o[i],e,t));this.tcpSocket.setEncoding("utf8"),this.tcpSocket.setKeepAlive(!0,0),this.tcpSocket.setNoDelay(!0),this.tcpSocket.on("error",this.eventForwarders.tcpError)}else if(i===U.WS.Scheme||i===U.WSS.Scheme)i===U.WSS.Scheme?this.webSocket=new Oe(`wss://${e}:${t}`):this.webSocket=new Oe(`ws://${e}:${t}`),this.webSocket.addEventListener("open",this.onConnect.bind(this,o[i],e,t)),this.webSocket.addEventListener("error",this.eventForwarders.wsError);else throw new Error("Incorrect transport specified")}onConnect(e,t,i){this.onConnectHasRun||(D.network(`Established ${e} connection with '${t}:${i}'.`),typeof this.tcpSocket<"u"?(this.tcpSocket.addListener("close",this.eventForwarders.disconnect),this.tcpSocket.addListener("data",this.eventForwarders.tcpData)):typeof this.webSocket<"u"&&(this.webSocket.addEventListener("close",this.eventForwarders.disconnect),this.webSocket.addEventListener("message",this.eventForwarders.wsData)),this.onConnectHasRun=!0,this.emit("connect"))}clearDisconnectTimerOnTimeout(){this.timers.disconnect&&clearTimeout(this.timers.disconnect)}disconnect(){if(this.clearDisconnectTimerOnTimeout(),this.tcpSocket)this.tcpSocket.removeListener("close",this.eventForwarders.disconnect),this.tcpSocket.removeListener("data",this.eventForwarders.tcpData),this.tcpSocket.removeListener("error",this.eventForwarders.tcpError),this.tcpSocket.destroy(),this.tcpSocket=void 0;else if(this.webSocket)try{this.webSocket.removeEventListener("close",this.eventForwarders.disconnect),this.webSocket.removeEventListener("message",this.eventForwarders.wsData),this.webSocket.removeEventListener("error",this.eventForwarders.wsError),this.webSocket.close()}catch{}finally{this.webSocket=void 0}this.onConnectHasRun=!1,this.emit("disconnect")}write(e,t){if(this.tcpSocket)return this.tcpSocket.write(e,t);if(this.webSocket)return this.webSocket.send(e,t),!0;throw new Error("Cannot write to socket when there is no active connection")}disconnectOnTimeout(e,t,i){this.removeListener("connect",this.clearDisconnectTimerOnTimeout);const s={code:"ETIMEDOUT",message:`Connection to '${e}:${t}' timed out after ${i} milliseconds`};this.emit("error",s),this.disconnect()}constructor(...e){super(...e),this.timers={},this.onConnectHasRun=!1,this.eventForwarders={disconnect:()=>this.emit("disconnect"),tcpData:t=>this.emit("data",t),wsData:t=>this.emit("data",`${t.data}
`),tcpError:t=>this.emit("error",t),wsError:t=>this.emit("error",t.error)}}}var kt=_t;class wt extends ge.EventEmitter{constructor(e,t,i,s=x.PORT,o=x.TRANSPORT_SCHEME,n=x.TIMEOUT,l=x.PING_INTERVAL,c=x.RECONNECT){if(super(),this.application=e,this.version=t,this.host=i,this.port=s,this.scheme=o,this.timeout=n,this.pingInterval=l,this.reconnectInterval=c,this.timers={},this.verifications=[],this.status=q.DISCONNECTED,this.messageBuffer="",!ce.versionRegexp.test(t))throw new Error(`Provided version string (${t}) is not a valid protocol version number.`);this.createSocket(),typeof document<"u"&&document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this))}get hostIdentifier(){return`${this.host}:${this.port}`}createSocket(){this.socket=new kt,this.socket.on("connect",this.onSocketConnect.bind(this)),this.socket.on("disconnect",this.onSocketDisconnect.bind(this)),this.socket.on("data",this.parseMessageChunk.bind(this))}destroySocket(){this.socket.disconnect()}parseMessageChunk(e){for(this.lastReceivedTimestamp=Date.now(),this.verifications.forEach(t=>clearTimeout(t)),this.verifications.length=0,this.messageBuffer+=e;this.messageBuffer.includes(ce.statementDelimiter);){const t=this.messageBuffer.split(ce.statementDelimiter);for(;t.length>1;){const i=String(t.shift());let s=JSON.parse(i);for(Array.isArray(s)||(s=[s]);s.length>0;){const o=s.shift();if(o.id==="versionNegotiation"){o.error?this.emit("version",{error:o.error}):this.emit("version",{software:o.result[0],protocol:o.result[1]});continue}o.id!=="keepAlive"&&this.emit("statement",o)}}this.messageBuffer=t.shift()||""}}ping(){D.ping(`Sending keep-alive ping to '${this.hostIdentifier}'`);const e=ce.buildRequestObject("server.ping",[],"keepAlive");return this.send(e)}async connect(){if(this.status===q.CONNECTED)return;this.status=q.CONNECTING;const e=(t,i)=>{const s=n=>{this.status=q.DISCONNECTED,i(n)};this.socket.removeAllListeners("error"),this.socket.once("error",s);const o=()=>{D.network(`Requesting protocol version ${this.version} with '${this.hostIdentifier}'.`),this.socket.removeListener("error",s);const n=ce.buildRequestObject("server.version",[this.application,this.version],"versionNegotiation"),l=c=>{if(Ke(c)){this.disconnect(!0);const h="unsupported protocol version.";D.errors(`Failed to connect with ${this.hostIdentifier} due to ${h}`),i(h)}else if(c.protocol!==this.version&&`${c.protocol}.0`!==this.version&&`${c.protocol}.0.0`!==this.version){this.disconnect(!0);const h=`incompatible protocol version negotiated (${c.protocol} !== ${this.version}).`;D.errors(`Failed to connect with ${this.hostIdentifier} due to ${h}`),i(h)}else D.network(`Negotiated protocol version ${c.protocol} with '${this.hostIdentifier}', powered by ${c.software}.`),this.status=q.CONNECTED,this.emit("connect"),t()};this.once("version",l),this.send(n)};this.socket.once("connect",o),this.socket.on("error",this.onSocketError.bind(this)),this.socket.connect(this.host,this.port,this.scheme,this.timeout)};await new Promise(e)}async reconnect(){await this.clearReconnectTimer(),D.network(`Trying to reconnect to '${this.hostIdentifier}'..`),this.status=q.RECONNECTING,this.destroySocket(),this.createSocket();try{await this.connect()}catch{}}clearReconnectTimer(){this.timers.reconnect&&clearTimeout(this.timers.reconnect),this.timers.reconnect=void 0}clearKeepAliveTimer(){this.timers.keepAlive&&clearTimeout(this.timers.keepAlive),this.timers.keepAlive=void 0}setupKeepAliveTimer(){this.timers.keepAlive||(this.timers.keepAlive=setTimeout(this.ping.bind(this),this.pingInterval))}async disconnect(e=!1,t=!0){if(this.status===q.DISCONNECTED&&!e)return!1;t&&(this.status=q.DISCONNECTING),await this.clearKeepAliveTimer(),await this.clearReconnectTimer();const i=s=>{this.once("disconnect",()=>s(!0)),this.destroySocket()};return new Promise(i)}async handleVisibilityChange(){document.visibilityState==="hidden"&&this.disconnect(!0,!1),document.visibilityState==="visible"&&this.reconnect()}send(e){this.clearKeepAliveTimer();const t=Date.now(),i=setTimeout(this.verifySend.bind(this,t),this.timeout);return this.verifications.push(i),this.setupKeepAliveTimer(),this.socket.write(e+ce.statementDelimiter)}verifySend(e){if(Number(this.lastReceivedTimestamp)<e){if(this.status===q.DISCONNECTED||this.status===q.DISCONNECTING){D.errors(`Tried to verify already disconnected connection to '${this.hostIdentifier}'`);return}this.clearKeepAliveTimer(),D.network(`Connection to '${this.hostIdentifier}' timed out.`),this.socket.disconnect()}}onSocketConnect(){this.clearReconnectTimer(),this.lastReceivedTimestamp=Date.now(),this.setupKeepAliveTimer(),this.socket.removeAllListeners("error"),this.socket.on("error",this.onSocketError.bind(this))}onSocketDisconnect(){this.emit("disconnect"),this.clearKeepAliveTimer(),this.status===q.DISCONNECTING?(this.clearReconnectTimer(),this.removeAllListeners(),this.status=q.DISCONNECTED,D.network(`Disconnected from '${this.hostIdentifier}'.`)):(this.status===q.CONNECTED&&D.errors(`Connection with '${this.hostIdentifier}' was closed, trying to reconnect in ${this.reconnectInterval/1e3} seconds.`),this.status=q.DISCONNECTED,this.timers.reconnect||(this.timers.reconnect=setTimeout(this.reconnect.bind(this),this.reconnectInterval)))}onSocketError(e){if(!(typeof e>"u")){if(e.code==="EAI_AGAIN"){D.errors(`Failed to look up DNS records for '${this.host}'.`);return}if(e.code==="ETIMEDOUT"){D.errors(e.message);return}D.errors(`Unknown network error ('${this.hostIdentifier}'): `,e)}}}var Et=wt;const Tt=function(r){return"id"in r&&"error"in r},Ct=function(r){return!("id"in r)&&"method"in r};class St extends ge.EventEmitter{constructor(e,t,i,s=x.PORT,o=x.TRANSPORT_SCHEME,n=x.TIMEOUT,l=x.PING_INTERVAL,c=x.RECONNECT){super(),this.subscriptionMethods={},this.requestId=0,this.requestResolvers={},this.connectionLock=new ye,this.connection=new Et(e,t,i,s,o,n,l,c)}async connect(){const e=await this.connectionLock.acquire();try{if(this.connection.status===q.CONNECTED)return;this.connection.on("statement",this.response.bind(this)),this.connection.on("connect",this.resubscribeOnConnect.bind(this)),this.connection.on("connect",this.emit.bind(this,"connected")),this.connection.on("disconnect",this.onConnectionDisconnect.bind(this)),this.connection.on("error",this.emit.bind(this,"error")),await this.connection.connect()}finally{e()}}async disconnect(e=!1,t=!1){const i=await this.connectionLock.acquire();try{t||(this.removeAllListeners(),this.subscriptionMethods={});for(const s in this.requestResolvers){const o=this.requestResolvers[s];o(new Error("Manual disconnection")),delete this.requestResolvers[s]}return await this.connection.disconnect(e)}finally{i()}}async request(e,...t){if(this.connection.status!==q.CONNECTED)throw new Error(`Unable to send request to a disconnected server '${this.connection.host}'.`);this.requestId+=1;const i=this.requestId,s=ce.buildRequestObject(e,t,i),o=n=>{this.requestResolvers[i]=(l,c)=>{n(l||c)},this.connection.send(s)};return D.network(`Sending request '${e}' to '${this.connection.host}'`),new Promise(o)}async subscribe(e,...t){this.subscriptionMethods[e]||(this.subscriptionMethods[e]=new Set),this.subscriptionMethods[e].add(JSON.stringify(t));const i=await this.request(e,...t),s={jsonrpc:"2.0",method:e,params:[...t,i]};this.emit("notification",s)}async unsubscribe(e,...t){if(this.connection.status!==q.CONNECTED)throw new Error(`Unable to send unsubscribe request to a disconnected server '${this.connection.host}'.`);if(!this.subscriptionMethods[e])throw new Error(`Cannot unsubscribe from '${e}' since the method has no subscriptions.`);const i=JSON.stringify(t);if(!this.subscriptionMethods[e].has(i))throw new Error(`Cannot unsubscribe from '${e}' since it has no subscription with the given parameters.`);this.subscriptionMethods[e].delete(i),await this.request(e.replace(".subscribe",".unsubscribe"),...t),D.client(`Unsubscribed from '${String(e)}' for the '${i}' parameters.`)}async resubscribeOnConnect(){D.client(`Connected to '${this.connection.hostIdentifier}'.`);const e=[];for(const t in this.subscriptionMethods){for(const i of this.subscriptionMethods[t].values()){const s=JSON.parse(i);e.push(this.subscribe(t,...s))}await Promise.all(e)}e.length>0&&D.client(`Restored ${e.length} previous subscriptions for '${this.connection.hostIdentifier}'`)}response(e){if(Ct(e)){D.client(`Received notification for '${e.method}' from '${this.connection.host}'`),this.emit("notification",e);return}if(e.id===null)throw new Error("Internal error: Received an RPC response with ID null.");const t=this.requestResolvers[e.id];if(!t)throw new Error("Internal error: Callback for response not available.");delete this.requestResolvers[e.id],Tt(e)?t(new Error(e.error.message)):t(void 0,e.result)}onConnectionDisconnect(){this.emit("disconnected");for(const e in this.requestResolvers){const t=this.requestResolvers[e];t(new Error("Connection lost")),delete this.requestResolvers[e]}}}var gt=St;class $t extends ge.EventEmitter{constructor(e,t,i=x.CLUSTER_CONFIDENCE,s=x.CLUSTER_DISTRIBUTION,o=x.CLUSTER_ORDER,n=x.TIMEOUT,l=x.PING_INTERVAL,c=x.RECONNECT){super(),this.application=e,this.version=t,this.confidence=i,this.distribution=s,this.order=o,this.timeout=n,this.pingInterval=l,this.reconnectInterval=c,this.clients={},this.connections=0,this.notifications={},this.status=W.DISABLED,this.requestCounter=0,this.requestPromises={},this.requestLock=new ye,this.responseLock=new ye,D.cluster(`Initialized empty cluster (${i} of ${s||"ALL"})`),(s===ve.ALL||i/s<=.5)&&D.warning(`Subscriptions might return multiple valid responses when confidence (${i}) is less than 51% of distribution.`)}async addServer(e,t=x.PORT,i=x.TRANSPORT_SCHEME,s=!0){const o=new gt(this.application,this.version,e,t,i,this.timeout,this.pingInterval,this.reconnectInterval),n=`${e}:${t}`;this.clients[n]={state:X.UNAVAILABLE,connection:o};const l=()=>{const b=Math.max(this.confidence,this.distribution);this.connections>=b?this.status!==W.READY&&(this.status=W.READY,this.emit("ready"),D.cluster(`Cluster status is ready (currently ${this.connections} of ${b} connections available.)`)):this.connections>=this.confidence?this.status!==W.DEGRADED&&(this.status=W.DEGRADED,this.emit("degraded"),D.cluster(`Cluster status is degraded (only ${this.connections} of ${b} connections available.)`)):this.status!==W.DISABLED&&(this.status=W.DISABLED,this.emit("disabled"),D.cluster(`Cluster status is disabled (only ${this.connections} of the ${b} connections are available.)`))},c=async()=>{try{o.connection.status===q.CONNECTED&&(this.clients[n].state===X.UNAVAILABLE&&(this.connections+=1),this.clients[n].state=X.AVAILABLE,l())}catch{}},h=()=>{this.clients[n].state===X.AVAILABLE&&(this.connections-=1),this.clients[n].state=X.UNAVAILABLE,l()};if(o.connection.on("connect",c.bind(this)),o.connection.on("disconnect",h.bind(this)),o.on("notification",this.handleSubscriptionNotifications.bind(this,n)),s)try{await o.connect()}catch(b){D.cluster(`Failed to connect with ${e}: ${b}`)}}async request(e,...t){if(this.status===W.DISABLED)throw new Error(`Cannot request '${e}' when available clients (${this.connections}) is less than required confidence (${this.confidence}).`);const i=await this.requestLock.acquire();let s=0;try{this.requestCounter+=1,s=this.requestCounter}finally{i()}this.requestPromises[s]=[];const o=Object.keys(this.clients).filter(h=>this.clients[h].state===X.AVAILABLE);let n=0,l=this.distribution||o.length;for(this.status===W.DEGRADED&&(l=o.length);n<l;){let h=0;this.order===de.RANDOM&&(h=Math.floor(Math.random()*o.length));const[b]=o.splice(h,1),T=this.clients[b].connection.request(e,...t);this.requestPromises[s].push(T),n+=1}const c=(h,b)=>{const T=async()=>{const C={};let L=0;for(const p in this.requestPromises[s]){let d;try{const v=[this.requestPromises[s][p],Promise.resolve(void 0)];d=await Promise.race(v)}catch{L+=1;continue}if(d!==void 0){const v=JSON.stringify(d);if(L+=1,C[v]===void 0?C[v]=1:C[v]+=1,C[v]===this.confidence){D.cluster(`Validated response for '${e}' with sufficient integrity (${this.confidence}).`),h(d);return}}}if(L===this.requestPromises[s].length){b(new Error(`Unable to complete request for '${e}', response failed to reach sufficient integrity (${this.confidence}).`));return}setTimeout(T,1e3)};T()};return new Promise(c)}async subscribe(e,...t){for(const i in this.clients){const s=this.clients[i].connection;try{await s.subscribe(e,...t)}catch{}}}async unsubscribe(e,...t){const i=[];for(const s in this.clients){const o=this.clients[s].connection;i.push(o.unsubscribe(e,...t))}await Promise.all(i)}async handleSubscriptionNotifications(e,t){const i=await this.responseLock.acquire();try{const s=JSON.stringify(t);this.notifications[s]===void 0&&(this.notifications[s]=new Set),this.notifications[s].add(e),this.notifications[s].size===this.confidence&&(D.cluster(`Validated notification for '${t.method}' with sufficient integrity (${this.confidence}).`),this.emit("notification",t),setTimeout(this.dismissSubscriptionNotification.bind(this,s),this.timeout)),this.notifications[s].size===this.distribution&&this.dismissSubscriptionNotification(s)}finally{i()}}async dismissSubscriptionNotification(e){delete this.notifications[e]}async ready(){const e=Date.now(),t=i=>{const s=()=>{if(this.status===W.READY){i(!0);return}if(Date.now()-e>this.timeout){i(!1);return}setTimeout(s,50)};s()};return new Promise(t)}async startup(){D.cluster("Starting up cluster.");const e=[];for(const t in this.clients){const{host:i,port:s,scheme:o}=this.clients[t].connection.connection;this.clients[t].state===X.AVAILABLE?D.warning(`Called startup(), but server ${i}:${s} is already connected`):e.push(this.addServer(i,s,o))}return Promise.all(e)}async shutdown(e=!1){D.cluster("Shutting down cluster.");const t=[],i=s=>{this.once("disabled",()=>s(Promise.all(t)));for(const o in this.clients)t.push(this.clients[o].connection.disconnect(!0,e))};return new Promise(i)}}var yt=$t;function Pe(r,e,t){const i=r.slice();return i[31]=e[t],i[33]=t,i}function Dt(r){let e,t="FBCH hot wallet",i,s,o,n,l,c,h,b,T,C,L,p,d,v=r[4].getTokenDepositAddress()+"",S,_,a,y,H="<p>This is your FBCH hot wallet deposit address.</p> <p>Send money here to swap futures, then sweep assets back to your wallet.</p>",G,F,z="Show/hide backup",ie,g,m,A,Q,K,Ee,I,M=r[3]&&qe(r);const me=[At,It],se=[];function De(f,R){return f[5]?0:1}return m=De(r),A=se[m]=me[m](r),{c(){e=w("h4"),e.textContent=t,i=O(),s=w("qr-code"),o=w("img"),c=O(),h=w("div"),b=w("div"),T=w("img"),L=O(),p=w("div"),d=w("button"),S=le(v),a=O(),y=w("div"),y.innerHTML=H,G=O(),F=w("div"),F.textContent=z,ie=O(),M&&M.c(),g=O(),A.c(),Q=oe(),this.h()},l(f){e=E(f,"H4",{"data-svelte-h":!0}),V(e)!=="svelte-13kwq8l"&&(e.textContent=t),i=P(f),s=E(f,"QR-CODE",{id:!0,contents:!0,"module-color":!0,"position-ring-color":!0,"position-center-color":!0,"mask-x-to-y-ratio":!0,style:!0});var R=B(s);o=E(R,"IMG",{width:!0,src:!0,slot:!0}),R.forEach(u),c=P(f),h=E(f,"DIV",{});var ue=B(h);b=E(ue,"DIV",{style:!0});var Te=B(b);T=E(Te,"IMG",{width:!0,src:!0,alt:!0}),L=P(Te),p=E(Te,"DIV",{});var Ne=B(p);d=E(Ne,"BUTTON",{class:!0});var Ie=B(d);S=ae(Ie,v),Ie.forEach(u),Ne.forEach(u),Te.forEach(u),ue.forEach(u),a=P(f),y=E(f,"DIV",{"data-svelte-h":!0}),V(y)!=="svelte-10bjkwa"&&(y.innerHTML=H),G=P(f),F=E(f,"DIV",{"data-svelte-h":!0}),V(F)!=="svelte-kev3b5"&&(F.textContent=z),ie=P(f),M&&M.l(f),g=P(f),A.l(f),Q=oe(),this.h()},h(){N(o,"width","52"),be(o.src,n=$e)||N(o,"src",n),N(o,"slot","icon"),re(s,"id","qr1"),re(s,"contents",l=r[4].getDepositAddress()),re(s,"module-color","#000"),re(s,"position-ring-color","#88338A"),re(s,"position-center-color","#FF00EA"),re(s,"mask-x-to-y-ratio","1.2"),ee(s,"width","250px"),ee(s,"height","250px"),ee(s,"margin","1em auto"),ee(s,"background-color","#fff"),N(T,"width","52px"),be(T.src,C=$e)||N(T,"src",C),N(T,"alt","hot wallet"),N(d,"class","styled svelte-lfu3on"),ee(b,"display","flex")},m(f,R){k(f,e,R),k(f,i,R),k(f,s,R),$(s,o),k(f,c,R),k(f,h,R),$(h,b),$(b,T),$(b,L),$(b,p),$(p,d),$(d,S),k(f,a,R),k(f,y,R),k(f,G,R),k(f,F,R),k(f,ie,R),M&&M.m(f,R),k(f,g,R),se[m].m(f,R),k(f,Q,R),K=!0,Ee||(I=[Ge(_=ze.call(null,h,r[4].getTokenDepositAddress())),J(h,"svelte-copy",r[14]),J(h,"svelte-copy:error",r[15]),J(F,"click",r[10])],Ee=!0)},p(f,R){(!K||R[0]&16&&l!==(l=f[4].getDepositAddress()))&&re(s,"contents",l),(!K||R[0]&16)&&v!==(v=f[4].getTokenDepositAddress()+"")&&pe(S,v),_&&We(_.update)&&R[0]&16&&_.update.call(null,f[4].getTokenDepositAddress()),f[3]?M?M.p(f,R):(M=qe(f),M.c(),M.m(g.parentNode,g)):M&&(M.d(1),M=null);let ue=m;m=De(f),m===ue?se[m].p(f,R):(ke(),Z(se[ue],1,1,()=>{se[ue]=null}),_e(),A=se[m],A?A.p(f,R):(A=se[m]=me[m](f),A.c()),Y(A,1),A.m(Q.parentNode,Q))},i(f){K||(Y(A),K=!0)},o(f){Z(A),K=!1},d(f){f&&(u(e),u(i),u(s),u(c),u(h),u(a),u(y),u(G),u(F),u(ie),u(g),u(Q)),M&&M.d(f),se[m].d(f),Ee=!1,Se(I)}}}function Nt(r){let e,t="This FBCH app uses a <b>temporary</b> hot web wallet to swap Future tokens and BCH.",i,s,o=`Please enter an external wallet address where your tokens and BCH change will be sent for long
			term storage:`,n,l,c,h,b,T,C,L,p,d=`<p>If you do not have a <a target="_blank" href="https://cashtokens.org">CashToken</a> wallet, select
				one below:</p> <h3>CashToken Wallets:</h3> <ul class="svelte-lfu3on"><li>Desktop
					<ul class="svelte-lfu3on"><li><a target="_blank" href="https://electroncash.org/">Electron Cash</a></li> <li><a target="_blank" href="https://github.com/cashonize/cashonize-quasar/releases">Cashonize Quasar</a></li></ul></li> <li>Web
					<ul class="svelte-lfu3on"><li><a target="_blank" href="https://cashonize.com/">Cashonize</a></li> <li><a target="_blank" href="https://chromewebstore.google.com/detail/paytaca/pakphhpnneopheifihmjcjnbdbhaaiaa">Paytaca Chrome Extension</a></li></ul></li> <li>Mobile
					<ul class="svelte-lfu3on"><li><a target="_blank" href="https://www.paytaca.com/#wallet">Paytaca</a></li> <li><a target="_blank" href="https://zapit.io/#/">Zapit</a></li></ul></li></ul>`,v,S,_=r[2]&&He();return{c(){e=w("p"),e.innerHTML=t,i=O(),s=w("p"),s.textContent=o,n=O(),_&&_.c(),l=O(),c=w("div"),h=w("img"),T=O(),C=w("textarea"),L=O(),p=w("div"),p.innerHTML=d,this.h()},l(a){e=E(a,"P",{"data-svelte-h":!0}),V(e)!=="svelte-1q39s1b"&&(e.innerHTML=t),i=P(a),s=E(a,"P",{"data-svelte-h":!0}),V(s)!=="svelte-1gp1kbs"&&(s.textContent=o),n=P(a),_&&_.l(a),l=P(a),c=E(a,"DIV",{style:!0});var y=B(c);h=E(y,"IMG",{src:!0,alt:!0}),T=P(y),C=E(y,"TEXTAREA",{id:!0,rows:!0,style:!0,placeholder:!0,class:!0}),B(C).forEach(u),y.forEach(u),L=P(a),p=E(a,"DIV",{"data-svelte-h":!0}),V(p)!=="svelte-1e1umuj"&&(p.innerHTML=d),this.h()},h(){be(h.src,b=mt)||N(h,"src",b),N(h,"alt","wallet"),N(C,"id","addr"),N(C,"rows","3"),ee(C,"line-break","anywhere"),N(C,"placeholder","bitcoincash:zq... ..."),N(C,"class","svelte-lfu3on"),ee(c,"display","flex")},m(a,y){k(a,e,y),k(a,i,y),k(a,s,y),k(a,n,y),_&&_.m(a,y),k(a,l,y),k(a,c,y),$(c,h),$(c,T),$(c,C),Ae(C,r[1]),k(a,L,y),k(a,p,y),v||(S=[J(C,"input",r[13]),J(C,"change",r[12])],v=!0)},p(a,y){a[2]?_||(_=He(),_.c(),_.m(l.parentNode,l)):_&&(_.d(1),_=null),y[0]&2&&Ae(C,a[1])},i:ne,o:ne,d(a){a&&(u(e),u(i),u(s),u(n),u(l),u(c),u(L),u(p)),_&&_.d(a),v=!1,Se(S)}}}function qe(r){let e,t=r[4].toDbString()+"",i,s,o,n;return{c(){e=w("div"),i=le(t)},l(l){e=E(l,"DIV",{});var c=B(e);i=ae(c,t),c.forEach(u)},m(l,c){k(l,e,c),$(e,i),o||(n=[Ge(s=ze.call(null,e,r[4].toDbString())),J(e,"svelte-copy",r[16]),J(e,"svelte-copy:error",r[17])],o=!0)},p(l,c){c[0]&16&&t!==(t=l[4].toDbString()+"")&&pe(i,t),s&&We(s.update)&&c[0]&16&&s.update.call(null,l[4].toDbString())},d(l){l&&u(e),o=!1,Se(n)}}}function It(r){let e,t="loading wallet...";return{c(){e=w("p"),e.textContent=t},l(i){e=E(i,"P",{"data-svelte-h":!0}),V(e)!=="svelte-14wm895"&&(e.textContent=t)},m(i,s){k(i,e,s)},p:ne,i:ne,o:ne,d(i){i&&u(e)}}}function At(r){let e,t,i,s;const o=[Lt,Rt],n=[];function l(c,h){return c[5].length>0?0:1}return e=l(r),t=n[e]=o[e](r),{c(){t.c(),i=oe()},l(c){t.l(c),i=oe()},m(c,h){n[e].m(c,h),k(c,i,h),s=!0},p(c,h){let b=e;e=l(c),e===b?n[e].p(c,h):(ke(),Z(n[b],1,1,()=>{n[b]=null}),_e(),t=n[e],t?t.p(c,h):(t=n[e]=o[e](c),t.c()),Y(t,1),t.m(i.parentNode,i))},i(c){s||(Y(t),s=!0)},o(c){Z(t),s=!1},d(c){c&&u(i),n[e].d(c)}}}function Rt(r){let e,t="no wallet utxos available";return{c(){e=w("p"),e.textContent=t},l(i){e=E(i,"P",{"data-svelte-h":!0}),V(e)!=="svelte-9fop6y"&&(e.textContent=t)},m(i,s){k(i,e,s)},p:ne,i:ne,o:ne,d(i){i&&u(e)}}}function Lt(r){let e,t,i,s,o,n="Shape",l,c,h="Sweep FBCH",b,T,C="Sweep BCH",L,p,d,v='<tr class="header svelte-lfu3on"><td>BCH</td> <td>FBCH</td> <td>Series</td> <td>action</td></tr>',S,_,a=[],y=new Map,H,G,F,z=Le(r[5]);const ie=g=>g[31].txid+":"+g[31].vout;for(let g=0;g<z.length;g+=1){let m=Pe(r,z,g),A=ie(m);y.set(A,a[g]=Ue(A,m))}return{c(){e=w("div"),t=w("img"),s=O(),o=w("button"),o.textContent=n,l=O(),c=w("button"),c.textContent=h,b=O(),T=w("button"),T.textContent=C,L=O(),p=w("table"),d=w("thead"),d.innerHTML=v,S=O(),_=w("tbody");for(let g=0;g<a.length;g+=1)a[g].c();this.h()},l(g){e=E(g,"DIV",{class:!0});var m=B(e);t=E(m,"IMG",{width:!0,src:!0,alt:!0}),s=P(m),o=E(m,"BUTTON",{"data-svelte-h":!0}),V(o)!=="svelte-1ebowe6"&&(o.textContent=n),l=P(m),c=E(m,"BUTTON",{"data-svelte-h":!0}),V(c)!=="svelte-habgjc"&&(c.textContent=h),b=P(m),T=E(m,"BUTTON",{"data-svelte-h":!0}),V(T)!=="svelte-1cgin4a"&&(T.textContent=C),m.forEach(u),L=P(g),p=E(g,"TABLE",{class:!0});var A=B(p);d=E(A,"THEAD",{class:!0,"data-svelte-h":!0}),V(d)!=="svelte-1q406h5"&&(d.innerHTML=v),S=P(A),_=E(A,"TBODY",{class:!0});var Q=B(_);for(let K=0;K<a.length;K+=1)a[K].l(Q);Q.forEach(u),A.forEach(u),this.h()},h(){N(t,"width","15"),be(t.src,i=$e)||N(t,"src",i),N(t,"alt","hotWallet"),N(e,"class","walletHead"),N(d,"class","svelte-lfu3on"),N(_,"class","svelte-lfu3on"),N(p,"class","wallet")},m(g,m){k(g,e,m),$(e,t),$(e,s),$(e,o),$(e,l),$(e,c),$(e,b),$(e,T),k(g,L,m),k(g,p,m),$(p,d),$(p,S),$(p,_);for(let A=0;A<a.length;A+=1)a[A]&&a[A].m(_,null);H=!0,G||(F=[J(o,"click",r[18]),J(c,"click",r[19]),J(T,"click",r[20])],G=!0)},p(g,m){m[0]&2144&&(z=Le(g[5]),ke(),a=rt(a,m,ie,1,g,z,y,_,ct,Ue,null,Pe),_e())},i(g){if(!H){for(let m=0;m<z.length;m+=1)Y(a[m]);H=!0}},o(g){for(let m=0;m<a.length;m+=1)Z(a[m]);H=!1},d(g){g&&(u(e),u(L),u(p));for(let m=0;m<a.length;m+=1)a[m].d();G=!1,Se(F)}}}function Me(r){let e=(Number(r[31].satoshis)/1e8).toLocaleString(void 0,{minimumFractionDigits:3})+"",t,i,s,o;return{c(){t=le(e),i=O(),s=w("img"),this.h()},l(n){t=ae(n,e),i=P(n),s=E(n,"IMG",{width:!0,src:!0,alt:!0}),this.h()},h(){N(s,"width","15"),be(s.src,o=lt)||N(s,"src",o),N(s,"alt","bchLogo")},m(n,l){k(n,t,l),k(n,i,l),k(n,s,l)},p(n,l){l[0]&32&&e!==(e=(Number(n[31].satoshis)/1e8).toLocaleString(void 0,{minimumFractionDigits:3})+"")&&pe(t,e)},d(n){n&&(u(t),u(i),u(s))}}}function Be(r){let e=(Number(r[31].token.amount)/1e8).toLocaleString(void 0,{minimumFractionDigits:3})+"",t,i,s,o;return s=new at({props:{time:j.get(r[31].token?.category),size:"15"}}),{c(){t=le(e),i=O(),et(s.$$.fragment)},l(n){t=ae(n,e),i=P(n),tt(s.$$.fragment,n)},m(n,l){k(n,t,l),k(n,i,l),it(s,n,l),o=!0},p(n,l){(!o||l[0]&32)&&e!==(e=(Number(n[31].token.amount)/1e8).toLocaleString(void 0,{minimumFractionDigits:3})+"")&&pe(t,e);const c={};l[0]&32&&(c.time=j.get(n[31].token?.category)),s.$set(c)},i(n){o||(Y(s.$$.fragment,n),o=!0)},o(n){Z(s.$$.fragment,n),o=!1},d(n){n&&(u(t),u(i)),st(s,n)}}}function xe(r){let e=j.has(r[31].token.category),t,i=e&&Fe(r);return{c(){i&&i.c(),t=oe()},l(s){i&&i.l(s),t=oe()},m(s,o){i&&i.m(s,o),k(s,t,o)},p(s,o){o[0]&32&&(e=j.has(s[31].token.category)),e?i?i.p(s,o):(i=Fe(s),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null)},d(s){s&&u(t),i&&i.d(s)}}}function Fe(r){let e,t=String(j.get(r[31].token?.category)).padStart(7,"0")+"",i,s;return{c(){e=w("a"),i=le(t),this.h()},l(o){e=E(o,"A",{href:!0});var n=B(e);i=ae(n,t),n.forEach(u),this.h()},h(){N(e,"href",s="/v?block="+j.get(r[31].token?.category))},m(o,n){k(o,e,n),$(e,i)},p(o,n){n[0]&32&&t!==(t=String(j.get(o[31].token?.category)).padStart(7,"0")+"")&&pe(i,t),n[0]&32&&s!==(s="/v?block="+j.get(o[31].token?.category))&&N(e,"href",s)},d(o){o&&u(e)}}}function Ve(r){let e,t;function i(n,l){return l[0]&96&&(e=null),e==null&&(e=j.get(n[31].token?.category)<=Number(n[6])),e?Pt:Ot}let s=i(r,[-1,-1]),o=s(r);return{c(){o.c(),t=oe()},l(n){o.l(n),t=oe()},m(n,l){o.m(n,l),k(n,t,l)},p(n,l){s===(s=i(n,l))&&o?o.p(n,l):(o.d(1),o=s(n),o&&(o.c(),o.m(t.parentNode,t)))},d(n){n&&u(t),o.d(n)}}}function Ot(r){let e,t,i=Number(r[6])-j.get(r[31].token?.category)+"",s,o,n="â– ";return{c(){e=w("button"),t=le("T"),s=le(i),o=w("sub"),o.textContent=n,this.h()},l(l){e=E(l,"BUTTON",{class:!0});var c=B(e);t=ae(c,"T"),s=ae(c,i),o=E(c,"SUB",{"data-svelte-h":!0}),V(o)!=="svelte-e09y70"&&(o.textContent=n),c.forEach(u),this.h()},h(){N(e,"class","action svelte-lfu3on"),e.disabled=!0},m(l,c){k(l,e,c),$(e,t),$(e,s),$(e,o)},p(l,c){c[0]&96&&i!==(i=Number(l[6])-j.get(l[31].token?.category)+"")&&pe(s,i)},d(l){l&&u(e)}}}function Pt(r){let e,t="redeem",i,s;function o(){return r[21](r[31])}return{c(){e=w("button"),e.textContent=t,this.h()},l(n){e=E(n,"BUTTON",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-kgaca2"&&(e.textContent=t),this.h()},h(){N(e,"class","action svelte-lfu3on")},m(n,l){k(n,e,l),i||(s=J(e,"click",o),i=!0)},p(n,l){r=n},d(n){n&&u(e),i=!1,s()}}}function Ue(r,e){let t,i,s=Number(e[31].satoshis)>800,o,n,l,c,h,b,T,C,L,p=s&&Me(e),d=e[31].token&&Be(e),v=e[31].token&&xe(e),S=e[31].token&&Ve(e);return{key:r,first:null,c(){t=w("tr"),i=w("td"),p&&p.c(),o=O(),n=w("td"),l=w("i"),d&&d.c(),c=O(),h=w("td"),v&&v.c(),b=O(),T=w("td"),S&&S.c(),C=O(),this.h()},l(_){t=E(_,"TR",{class:!0});var a=B(t);i=E(a,"TD",{class:!0});var y=B(i);p&&p.l(y),y.forEach(u),o=P(a),n=E(a,"TD",{class:!0});var H=B(n);l=E(H,"I",{});var G=B(l);d&&d.l(G),G.forEach(u),H.forEach(u),c=P(a),h=E(a,"TD",{class:!0});var F=B(h);v&&v.l(F),F.forEach(u),b=P(a),T=E(a,"TD",{style:!0});var z=B(T);S&&S.l(z),z.forEach(u),C=P(a),a.forEach(u),this.h()},h(){N(i,"class","r svelte-lfu3on"),N(n,"class","r svelte-lfu3on"),N(h,"class","r svelte-lfu3on"),ee(T,"width","30px"),ee(T,"text-align","center"),N(t,"class","svelte-lfu3on"),this.first=t},m(_,a){k(_,t,a),$(t,i),p&&p.m(i,null),$(t,o),$(t,n),$(n,l),d&&d.m(l,null),$(t,c),$(t,h),v&&v.m(h,null),$(t,b),$(t,T),S&&S.m(T,null),$(t,C),L=!0},p(_,a){e=_,a[0]&32&&(s=Number(e[31].satoshis)>800),s?p?p.p(e,a):(p=Me(e),p.c(),p.m(i,null)):p&&(p.d(1),p=null),e[31].token?d?(d.p(e,a),a[0]&32&&Y(d,1)):(d=Be(e),d.c(),Y(d,1),d.m(l,null)):d&&(ke(),Z(d,1,1,()=>{d=null}),_e()),e[31].token?v?v.p(e,a):(v=xe(e),v.c(),v.m(h,null)):v&&(v.d(1),v=null),e[31].token?S?S.p(e,a):(S=Ve(e),S.c(),S.m(T,null)):S&&(S.d(1),S=null)},i(_){L||(Y(d),L=!0)},o(_){Z(d),L=!1},d(_){_&&u(t),p&&p.d(),d&&d.d(),v&&v.d(),S&&S.d()}}}function He(r){let e,t=`Your long-term address must be a valid <i>CashToken</i> Bitcoin Cash (BCH) cash addressâ€•like
				&quot;bitcoincash:zq ...&quot;`;return{c(){e=w("b"),e.innerHTML=t},l(i){e=E(i,"B",{"data-svelte-h":!0}),V(e)!=="svelte-dp9e87"&&(e.innerHTML=t)},m(i,s){k(i,e,s)},d(i){i&&u(e)}}}function qt(r){let e,t,i,s;const o=[Nt,Dt],n=[];function l(c,h){return c[0]?c[4]?1:-1:0}return~(t=l(r))&&(i=n[t]=o[t](r)),{c(){e=w("div"),i&&i.c(),this.h()},l(c){e=E(c,"DIV",{class:!0});var h=B(e);i&&i.l(h),h.forEach(u),this.h()},h(){N(e,"class","text-column")},m(c,h){k(c,e,h),~t&&n[t].m(e,null),s=!0},p(c,h){let b=t;t=l(c),t===b?~t&&n[t].p(c,h):(i&&(ke(),Z(n[b],1,1,()=>{n[b]=null}),_e()),~t?(i=n[t],i?i.p(c,h):(i=n[t]=o[t](c),i.c()),Y(i,1),i.m(e,null)):i=null)},i(c){s||(Y(i),s=!0)},o(c){Z(i),s=!1},d(c){c&&u(e),~t&&n[t].d()}}}function Mt(r,e=2e3){let t;return(...i)=>{clearTimeout(t),t=setTimeout(()=>{r.apply(this,i)},e)}}function Bt(r,e,t){let i,s,o=!1,n=!1,l,c,h,b,T,C=[];Re.subscribe(I=>{console.log(s),t(0,i=I)}),nt.subscribe(I=>{console.log(T),t(6,T=I)});function L(I){console.log(i),Re.set(I)}async function p(){await l.sendMaxFungibleTokens(i),await S()}async function d(){await l.sendMax(i),await S()}async function v(){await l.sendMax(l.getDepositAddress()),await S()}async function S(){await Promise.all([b.getUtxos(l.getDepositAddress()).then(I=>t(5,c=I))])}Qe(async()=>{try{let I=new yt("@fbch/app","1.4.3",1,1,de.RANDOM,2e3);I.addServer("bch.imaginary.cash",50004,U.WSS.Scheme,!1),b=new ht("mainnet",I,!1),ut.StorageProvider=ft,t(4,l=await dt.named("hot")),h=await l.getBalance("bch");let M=l.watchBalance(()=>{M(),S()});await S()}catch(I){throw I}});const _=()=>{t(3,n=!n)};async function a(){console.log("processing que data"),console.log(C),await l.swap(C),C=[]}const y=Mt(()=>a()),H=async(I,M)=>{h-=I.placement,C.push(I),console.log(C),t(5,c=c.filter(me=>me.txid+":"+me.vout!==M)),y()},G=async()=>{ot(s)?(t(0,i=s),L(i)):t(2,o=!0)};function F(){s=this.value,t(1,s)}return[i,s,o,n,l,c,T,p,d,v,_,H,G,F,I=>Ce.push("OK ðŸ“‹ðŸ—¸: "+I.detail),I=>Ce.push(`Error, no access to clipboard?: ${I.detail.message}`,{classes:["warn"]}),I=>Ce.push("OK - backup copied"),I=>Ce.push(`Error, no access to clipboard?: ${I.detail.message}`,{classes:["warn"]}),()=>v(),()=>p(),()=>d(),I=>H({future:I,locktime:j.get(I.token?.category)},I.txid+":"+I.vout)]}class Yt extends Xe{constructor(e){super(),Ze(this,e,Bt,qt,Je,{},null,[-1,-1])}}export{Yt as component,Kt as universal};
//# sourceMappingURL=11.BGWCVg7C.js.map
